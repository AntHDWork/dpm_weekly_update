{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "Weekly DPM Submission",
  "description": "Defines the structure of each weekly Digital Product Manager update.",
  "type": "object",
  "required": ["week_ending", "project_key", "dpm", "status", "delta"],
  "properties": {
    "week_ending": {
      "type": "string",
      "pattern": "^\\d{4}-\\d{2}-\\d{2}$",
      "description": "Week ending date in YYYY-MM-DD format."
    },
    "project_key": {
      "type": "string",
      "enum": ["catalogue", "fulfilment", "shopify_eu", "shopify_us", "d365", "zendesk"],
      "description": "Project identifier key."
    },
    "dpm": { "type": "string", "description": "Name of the Digital Product Manager." },
    "status": {
      "type": "string",
      "enum": ["Green", "Amber", "Red"],
      "description": "RAG status for the project."
    },
    "delta": {
      "type": "string",
      "description": "What changed since last week."
    },
    "milestones": { "type": "string", "description": "Key milestones and target dates." },
    "risks": { "type": "string", "description": "Risks or blockers and mitigations." },
    "metrics": { "type": "string", "description": "KPIs or quantitative metrics." },
    "next7": { "type": "string", "description": "Actions or priorities for next 7 days." },
    "asks": { "type": "string", "description": "Any asks or decisions required." },
    "notes": { "type": "string", "description": "Optional notes." },
    "submitted_at": {
      "type": "string",
      "description": "Timestamp of submission in ISO 8601 format."
    }
  }
}
